<head>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/icon.png">
    <link rel="manifest" href="assets/json/manifest.json">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
</head>

<body>
    <heder>
        <h1 class='heading'>match it</h1>
    </heder>
    <main>
       <section class="leading">
           <p class="leading-bigtext">match it</p>
           <p class="leading-text">It helps you pick out the appropriate clothing for the weather</p>
       </section>
       <section class="cards" id="cards">
           <article>
               <h1 class="artical-title">
                   take a picture of your clothes
               </h1>

               <input id="input-picture" type="file" accept="image/*" class="button button4">
               <button id="btnadd" type="button" class="button button4">install</button>
           </article>
       </section>
    </main>
</body>

<script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/pwa/assets/js/service-worker.js').then(function(registration) {
          // Registration was successful
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
          // registration failed :(
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
</script>    

<script>
    let deferredPrompt;
    
    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('in beforeinstallprompt');
      console.log(e);
    
      // Prevent Chrome 67 and earlier from automatically showing the prompt
      e.preventDefault();
      // Stash the event so it can be triggered later.
      deferredPrompt = e;
    });
    
    btnAdd = document.getElementById("btnadd");
    btnAdd.addEventListener('click', (e) => {
      // hide our user interface that shows our A2HS button
      btnAdd.style.display = 'none';
      // Show the prompt
      deferredPrompt.prompt();
      // Wait for the user to respond to the prompt
      deferredPrompt.userChoice
        .then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the A2HS prompt');
          } else {
            console.log('User dismissed the A2HS prompt');
          }
          deferredPrompt = null;
        });
    });

    console.log('test');
</script>
    
<script src="assets/js/match-it.js"></script>